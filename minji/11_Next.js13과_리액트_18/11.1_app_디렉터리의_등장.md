# 11.1 app 디렉터리의 등장

### Next.js에서의 레이아웃

- 페이지 공통으로 집어 넣을 수 있는 곳은 \_app이 유일했음
  - \_document -> 오직 서버에서마 작동하므로 onClick같은 이벤트 핸들러나 클라이언트 로직을 붙일 수 없음
  - \_app -> 페이지를 초기화하기 위한 용도로 사용됨
- app 레이아웃으로 인해 위 한계를 극복

#### 11.1.1 라우팅

##### 라우팅을 정의하는 방법

- Next.js 12 이하 : /pages/a/b.tsx dhk /pages/a/b/index.tsx는 동일한 주소로 변환됨
- Next.js 13 app : /app/a/b/는 /a/b로 변환되며, 파일명은 무시됨, 폴더명까지만 주소로 변환됨

##### layout.js

- Next.js 13부터는 app 디렉터리 내부의 폴더명이 라우팅이 되며, 이 폴더에 포함될 수 있는 파일명은 몇 가지로 제한되는데 그 중 하나가 layout.js
- layout.js가 있다면 하위 폴더 및 주소에 모두 영향을 미침
- 모든 페이지에 영향을 미치는 공통 레이아웃 또는 공통적으로 필요한 내뇽을 루트에 있는 layout에 작성할 수 있음
- layout은 app디렉터리 내부에서 예약어임으로 layout.{js|jsx|ts|tsx}로 사용해야 함

##### page.js

- Next.js에서 일반적으로 다뤘던 페이지
- page.js에 작성된 컴포넌트는 params(동적 라우트 파라미터 값), searchParams을 props로 받음
- app 디렉터리 내부에서 예약어임

##### error.js

- 해당 라우팅 영역에서 사용되는 공통 에러 컴포넌트
- 에러 바운더리는 클라이언트에서만 작동하므로 error 컴포넌트는 클라이언트 컴포넌트여야 함
- 같은 수준의 layout에서 에러가 발생한 경우 error 컴포넌트로 이동하지 않음
- 루트 에러 처리 담당은 app/global-error.js 사용 가능

##### not-found.js

- 404 페이지를 렌더링할 때 사용됨

##### loading.js

- Suspense를 기반으로 해당 컴포넌트가 불러오는 중임을 나타낼 때 사용

##### route.js

- /pages/api와 동일하게 /app/api를 기준으로 디렉터리 라우팅을 지원
- 마찬가지로 파일명 라우팅이 사라지고 디렉터리가 라우팅 주소를 담당
- 특정 경로에 대한 사용자 정의 요청 핸들러를 생성할 수 있음
